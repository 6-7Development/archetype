2025-10-26T23:21:39.000000000Z [inf]  Starting Container
2025-10-26T23:21:40.239864258Z [inf]  ======================================
2025-10-26T23:21:40.239874094Z [inf]  Time: Sun Oct 26 23:21:39 UTC 2025
2025-10-26T23:21:40.239881312Z [inf]  
2025-10-26T23:21:40.239888390Z [inf]  🔄 Running database migrations with drizzle-kit...
2025-10-26T23:21:40.239922009Z [inf]  ======================================
2025-10-26T23:21:40.239930310Z [inf]  🚂 RAILWAY STARTUP SCRIPT
2025-10-26T23:21:40.342295440Z [inf]  No config path provided, using default 'drizzle.config.ts'
2025-10-26T23:21:40.344861650Z [inf]  Reading config file '/app/drizzle.config.ts'
2025-10-26T23:21:41.140402329Z [inf]  Using 'pg' driver for database querying
2025-10-26T23:21:41.140408166Z [inf]  [⣷] Pulling schema from database...
2025-10-26T23:21:41.140415744Z [inf]  [2K[1G[⣯] Pulling schema from database...
2025-10-26T23:21:41.140421993Z [inf]  [2K[1G[⣟] Pulling schema from database...
2025-10-26T23:21:41.267113606Z [inf]  [2K[1G[⡿] Pulling schema from database...
2025-10-26T23:21:41.394922533Z [inf]  [2K[1G[⢿] Pulling schema from database...
2025-10-26T23:21:41.524348635Z [inf]  [2K[1G[⣻] Pulling schema from database...
2025-10-26T23:21:41.649552968Z [inf]  [2K[1G[⣽] Pulling schema from database...
2025-10-26T23:21:42.117220190Z [inf]  [2K[1G[⣷] Pulling schema from database...
2025-10-26T23:21:42.117225164Z [inf]  [2K[1G[⣯] Pulling schema from database...
2025-10-26T23:21:42.117230639Z [inf]  [2K[1G[⣟] Pulling schema from database...
2025-10-26T23:21:42.163814698Z [inf]  [2K[1G[⡿] Pulling schema from database...
2025-10-26T23:21:42.296231072Z [inf]  [2K[1G[⢿] Pulling schema from database...
2025-10-26T23:21:42.419884026Z [inf]  [2K[1G[⣻] Pulling schema from database...
2025-10-26T23:21:42.553623707Z [inf]  [2K[1G[⣽] Pulling schema from database...
2025-10-26T23:21:43.320036883Z [inf]  🚀 Starting Node.js application...
2025-10-26T23:21:43.320046791Z [inf]  [2K[1G[⣷] Pulling schema from database...
2025-10-26T23:21:43.320057510Z [inf]  [2K[1G[⣟] Pulling schema from database...
2025-10-26T23:21:43.320061348Z [inf]  [2K[1G[⣯] Pulling schema from database...
2025-10-26T23:21:43.320064850Z [inf]  [2K[1G[✓] Pulling schema from database...
2025-10-26T23:21:43.320071731Z [inf]  [i] No changes detected
2025-10-26T23:21:43.320076636Z [inf]  
2025-10-26T23:21:43.320089612Z [inf]  ✅ Database migrations completed successfully!
2025-10-26T23:21:43.320097378Z [inf]  
2025-10-26T23:21:44.485114044Z [inf]  [db] ✅ Added sslmode=no-verify to connection string for production
2025-10-26T23:21:44.487978779Z [inf]  [db] Using DATABASE_URL: postgresql://***@postgres.railway.internal:5432/railway
2025-10-26T23:21:44.487988965Z [inf]  [db] Environment: NODE_ENV=production, PORT=8080
2025-10-26T23:21:44.487991073Z [inf]  [db] Pool config: connectionTimeoutMillis=5000, ssl=enabled (rejectUnauthorized: false)
2025-10-26T23:21:44.487998991Z [inf]  [db] SSL Configuration: {"rejectUnauthorized":false}
2025-10-26T23:21:44.488007035Z [inf]  [db] Connection string includes SSL params: true
2025-10-26T23:21:44.499136379Z [inf]  [PERFORMANCE] System prompt base cached (21338 chars) - saves ~4KB per request
2025-10-26T23:21:44.503575490Z [inf]  [PLATFORM-HEALING] PROJECT_ROOT: /app
2025-10-26T23:21:44.508861645Z [inf]  [PERFORMANCE] Compression middleware enabled - responses will be 70-80% smaller
2025-10-26T23:21:44.514468510Z [inf]  📡 WebSocket server initialized at /ws
2025-10-26T23:21:44.514477014Z [inf]  [PLATFORM-HEALING] Session manager connected to WebSocket
2025-10-26T23:21:44.514483963Z [inf]  [PLATFORM-METRICS] Starting WebSocket broadcaster (5s intervals)
2025-10-26T23:21:44.523139976Z [inf]  ✅ All routes registered successfully
2025-10-26T23:21:44.526664274Z [inf]  🔍 Testing database connection...
2025-10-26T23:21:44.567610025Z [inf]  11:21:44 PM [express] serving on port 8080
2025-10-26T23:21:44.567617378Z [inf]  🌐 Server accessible at http://0.0.0.0:8080
2025-10-26T23:21:45.372128749Z [inf]  ✅ Database connected successfully
2025-10-26T23:21:45.372132435Z [inf]  🔧 Auto-healing system ENABLED (production mode)
2025-10-26T23:21:45.372136369Z [inf]  
2025-10-26T23:21:45.372140918Z [inf]  🔍 Checking GitHub integration configuration...
2025-10-26T23:21:45.372145008Z [inf]  ✅ GitHub integration configured successfully
2025-10-26T23:21:45.372149156Z [inf]     - Repository: 6-7Development/archetype
2025-10-26T23:21:45.372152762Z [inf]     - Branch: main
2025-10-26T23:21:45.372156632Z [inf]     - Token: ✓ (configured)
2025-10-26T23:21:45.372160896Z [inf]     - Owner User ID: Not set (owner must be manually marked in database)
2025-10-26T23:21:45.372164849Z [inf]     - Maintenance mode: Available for owner
2025-10-26T23:21:45.372169436Z [inf]  
2025-10-26T23:22:05.372584948Z [err]  }
2025-10-26T23:22:05.372598115Z [inf]  11:22:00 PM [express] GET /api/deployment-info 200 in 16ms :: {"version":"1.0.0","commitHash":"unknow…
2025-10-26T23:22:05.372606191Z [err]  Failed to get git info, using defaults: Error: spawn git ENOENT
2025-10-26T23:22:05.372613400Z [err]      at ChildProcess._handle.onexit (node:internal/child_process:285:19)
2025-10-26T23:22:05.372620934Z [err]      at onErrorNT (node:internal/child_process:483:16)
2025-10-26T23:22:05.372628671Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
2025-10-26T23:22:05.372634729Z [err]    errno: -2,
2025-10-26T23:22:05.372641245Z [err]    code: 'ENOENT',
2025-10-26T23:22:05.372647475Z [err]    syscall: 'spawn git',
2025-10-26T23:22:05.372654984Z [err]    path: 'git',
2025-10-26T23:22:05.372661657Z [err]    spawnargs: [ 'rev-parse', 'HEAD' ],
2025-10-26T23:22:05.372668254Z [err]    cmd: 'git rev-parse HEAD',
2025-10-26T23:22:05.372675145Z [err]    stdout: '',
2025-10-26T23:22:05.372721574Z [err]  Failed to get git info, using defaults: Error: spawn git ENOENT
2025-10-26T23:22:05.372735441Z [err]      at ChildProcess._handle.onexit (node:internal/child_process:285:19)
2025-10-26T23:22:05.372742142Z [err]      at onErrorNT (node:internal/child_process:483:16)
2025-10-26T23:22:05.372748836Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
2025-10-26T23:22:05.372755573Z [err]    errno: -2,
2025-10-26T23:22:05.372762491Z [err]    code: 'ENOENT',
2025-10-26T23:22:05.372769865Z [err]    syscall: 'spawn git',
2025-10-26T23:22:05.372775590Z [err]    path: 'git',
2025-10-26T23:22:05.372782845Z [err]    spawnargs: [ 'rev-parse', 'HEAD' ],
2025-10-26T23:22:05.372789791Z [err]    cmd: 'git rev-parse HEAD',
2025-10-26T23:22:05.372797097Z [err]    stdout: '',
2025-10-26T23:22:05.372805300Z [err]    stderr: ''
2025-10-26T23:22:05.376225092Z [err]    stderr: ''
2025-10-26T23:22:05.376230634Z [err]  }
2025-10-26T23:22:05.376236861Z [inf]  11:22:03 PM [express] GET /api/deployment-info 200 in 6ms :: {"version":"1.0.0","commitHash":"unknown…
2025-10-26T23:22:06.383323963Z [inf]  [AUTH] Verifying password...
2025-10-26T23:22:06.383336053Z [inf]  [AUTH] Password valid: true
2025-10-26T23:22:06.383344617Z [inf]  [AUTH] Authentication successful for: root@getdc360.com
2025-10-26T23:22:06.383352158Z [inf]  11:22:06 PM [express] POST /api/auth/login 200 in 302ms :: {"success":true,"user":{"id":"723e1301-c72…
2025-10-26T23:22:06.383376907Z [inf]  [AUTH] Login attempt for email: root@getdc360.com
2025-10-26T23:22:06.383386663Z [inf]  [AUTH] Found users: 1
2025-10-26T23:22:06.383394294Z [inf]  [AUTH] User found: root@getdc360.com has password: true
2025-10-26T23:22:07.467671775Z [inf]  11:22:06 PM [express] GET /api/auth/me 304 in 11ms :: {"user":{"id":"723e1301-c729-48fc-810a-39ddef95…
2025-10-26T23:22:07.467677786Z [inf]  11:22:06 PM [express] GET /api/projects 304 in 17ms :: []
2025-10-26T23:22:08.357955608Z [inf]  11:22:08 PM [express] GET /api/admin/users 200 in 34ms
2025-10-26T23:22:08.357968892Z [inf]  11:22:08 PM [express] GET /api/admin/usage-logs 200 in 32ms
2025-10-26T23:22:08.357976028Z [inf]  11:22:08 PM [express] GET /api/maintenance-mode/status 304 in 26ms :: {"enabled":true,"reason":"fixin…
2025-10-26T23:22:08.358079698Z [inf]  11:22:08 PM [express] GET /api/admin/stats 200 in 28ms
2025-10-26T23:22:08.358085234Z [inf]  11:22:08 PM [express] GET /api/admin/analytics 200 in 29ms
2025-10-26T23:22:09.391928094Z [inf]  11:22:09 PM [express] GET /api/platform/status 200 in 14ms :: {"overallHealth":100,"activeIncidents":…
2025-10-26T23:22:09.391932699Z [inf]  ✅ WebSocket client connected
2025-10-26T23:22:09.391936934Z [inf]  📡 [WS] Session registered: userId=admin, sessionId=platform-healing
2025-10-26T23:24:09.947524854Z [err]  [PLATFORM-BACKUP] ⚠️ Git unavailable, skipping backup: spawn git ENOENT
2025-10-26T23:24:09.947545322Z [inf]  11:24:06 PM [express] POST /api/platform/heal 200 in 103ms :: {"sessionId":"heal-1761521046902-cevu31…
2025-10-26T23:24:09.947588159Z [inf]  [HEAL-SESSION] Created session heal-1761521046902-cevu31y3w for user 723e1301-c729-48fc-810a-39ddef954ae2
2025-10-26T23:24:13.904027847Z [inf]  [HEAL-SESSION] Completed session heal-1761521046902-cevu31y3w with 0 changes
2025-10-26T23:25:03.370720503Z [inf]  [HEAL-SESSION] Created session heal-1761521096249-v021l62n9 for user 723e1301-c729-48fc-810a-39ddef954ae2
2025-10-26T23:25:03.370731427Z [err]  [PLATFORM-BACKUP] ⚠️ Git unavailable, skipping backup: spawn git ENOENT
2025-10-26T23:25:03.370738136Z [inf]  11:24:56 PM [express] POST /api/platform/heal 200 in 95ms :: {"sessionId":"heal-1761521096249-v021l62…
2025-10-26T23:25:33.373295337Z [err]  [HEAL-PROCESS] Error: BadRequestError: 400 {"type":"error","error":{"type":"invalid_request_error","message":"prompt is too long: 205027 tokens > 200000 maximum"},"request_id":"req_011CUWg2f5bNV8mrfqRxAvME"}
2025-10-26T23:25:33.373304726Z [err]      at APIError.generate (file:///app/node_modules/@anthropic-ai/sdk/core/error.mjs:37:20)
2025-10-26T23:25:33.373309364Z [err]      at Anthropic.makeStatusError (file:///app/node_modules/@anthropic-ai/sdk/client.mjs:152:32)
2025-10-26T23:25:33.373313624Z [err]      at Anthropic.makeRequest (file:///app/node_modules/@anthropic-ai/sdk/client.mjs:306:30)
2025-10-26T23:25:33.373317807Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-10-26T23:25:33.373330142Z [err]      at async runHealingProcess (file:///app/dist/index.js:4678:24) {
2025-10-26T23:25:33.373334380Z [err]    status: 400,
2025-10-26T23:25:33.373341283Z [err]    headers: Headers {
2025-10-26T23:25:33.373345520Z [err]      date: 'Sun, 26 Oct 2025 23:25:24 GMT',
2025-10-26T23:25:33.373350019Z [err]      'content-type': 'application/json',
2025-10-26T23:25:33.373353699Z [err]      'content-length': '164',
2025-10-26T23:25:33.373357642Z [err]      connection: 'keep-alive',
2025-10-26T23:25:33.373361350Z [err]      'cf-ray': '994db66eaf0e1766-IAD',
2025-10-26T23:25:33.373365513Z [err]      'x-should-retry': 'false',
2025-10-26T23:25:33.373369164Z [err]      'request-id': 'req_011CUWg2f5bNV8mrfqRxAvME',
2025-10-26T23:25:33.373373191Z [err]      'strict-transport-security': 'max-age=31536000; includeSubDomains; preload',
2025-10-26T23:25:33.373377194Z [err]      'anthropic-organization-id': '60f9e9aa-d58b-44f4-aa91-af881dd8f26a',
2025-10-26T23:25:33.373381124Z [err]      'x-envoy-upstream-service-time': '122',
2025-10-26T23:25:33.373385258Z [err]      via: '1.1 google',
2025-10-26T23:25:33.373389006Z [err]      'cf-cache-status': 'DYNAMIC',
2025-10-26T23:25:33.375605448Z [err]      'x-robots-tag': 'none',
2025-10-26T23:25:33.375610715Z [err]      server: 'cloudflare'
2025-10-26T23:25:33.375615737Z [err]    },
2025-10-26T23:25:33.375620174Z [err]    requestID: 'req_011CUWg2f5bNV8mrfqRxAvME',
2025-10-26T23:25:33.375624501Z [err]    error: {
2025-10-26T23:25:33.375628445Z [err]      type: 'error',
2025-10-26T23:25:33.375632953Z [err]      error: {
2025-10-26T23:25:33.375637429Z [err]        type: 'invalid_request_error',
2025-10-26T23:25:33.375641765Z [err]        message: 'prompt is too long: 205027 tokens > 200000 maximum'
2025-10-26T23:25:33.375645878Z [err]      },
2025-10-26T23:25:33.375649763Z [err]      request_id: 'req_011CUWg2f5bNV8mrfqRxAvME'
2025-10-26T23:25:33.375653611Z [err]    }
2025-10-26T23:25:33.375659046Z [err]  }
2025-10-26T23:25:33.375663833Z [inf]  [HEAL-SESSION] Failed session heal-1761521096249-v021l62n9: 400 {"type":"error","error":{"type":"invalid_request_error","message":"prompt is too long: 205027 tokens > 200000 maximum"},"request_id":"req_011CUWg2f5bNV8mrfqRxAvME"}