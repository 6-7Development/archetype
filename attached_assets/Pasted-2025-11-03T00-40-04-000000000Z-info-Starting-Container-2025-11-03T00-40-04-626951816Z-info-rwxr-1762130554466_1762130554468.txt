2025-11-03T00:40:04.000000000Z [info] Starting Container
2025-11-03T00:40:04.626951816Z [info] -rwxr-xr-x    1 root     root          3156 Nov  3 00:38 railway-start.sh
2025-11-03T00:40:04.626952419Z [info] drwxr-xr-x    1 root     root          4096 Nov  3 00:31 node_modules
2025-11-03T00:40:04.626962020Z [info] drwxr-xr-x    1 root     root          4096 Nov  3 00:39 .
2025-11-03T00:40:04.626967555Z [info] -rw-rw-r--    1 root     root        361403 Nov  3 00:31 package-lock.json
2025-11-03T00:40:04.626969605Z [info] -rw-rw-r--    1 root     root         12632 Nov  3 00:30 replit.md
2025-11-03T00:40:04.626982193Z [info] -rw-rw-r--    1 root     root          4631 Nov  3 00:31 package.json
2025-11-03T00:40:04.626983874Z [info] dr-xr-xr-x    1 root     root          4096 Nov  3 00:40 ..
2025-11-03T00:40:04.626984256Z [info] drwxr-xr-x    1 root     root          4096 Nov  3 00:30 server
2025-11-03T00:40:04.626997076Z [info] -rw-rw-r--    1 root     root          6775 Nov  3 00:38 create-healing-tables.sql
2025-11-03T00:40:04.627006567Z [info] -rwxr-xr-x    1 root     root          1990 Nov  3 00:38 debug-start.sh
2025-11-03T00:40:04.627017554Z [info] -rw-rw-r--    1 root     root           325 Nov  3 00:30 drizzle.config.ts
2025-11-03T00:40:04.627027174Z [info] -rw-rw-r--    1 root     root          2168 Nov  3 00:38 drop-old-tables.js
2025-11-03T00:40:04.627088271Z [info] ======================================
2025-11-03T00:40:04.627097062Z [info] ðŸš‚ RAILWAY STARTUP SCRIPT - DEBUG MODE
2025-11-03T00:40:04.627107013Z [info] ======================================
2025-11-03T00:40:04.627116220Z [info] Time: Mon Nov  3 00:40:04 UTC 2025
2025-11-03T00:40:04.627127898Z [info] Node version: v20.19.5
2025-11-03T00:40:04.627138524Z [info] NPM version: 10.8.2
2025-11-03T00:40:04.627147501Z [info] 
2025-11-03T00:40:04.627154990Z [info] ðŸ“ Current directory: /app
2025-11-03T00:40:04.627162772Z [info] ðŸ“‚ Listing root files:
2025-11-03T00:40:04.627171184Z [info] total 428
2025-11-03T00:40:04.628015618Z [info] -rw-rw-r--    1 root     root           960 Nov  3 00:30 tsconfig.json
2025-11-03T00:40:04.628023750Z [info] 
2025-11-03T00:40:04.628031141Z [info] ðŸ” Checking for server/public directory (frontend)...
2025-11-03T00:40:04.628040523Z [info] âœ… server/public directory exists (frontend build)
2025-11-03T00:40:04.628048607Z [info] 
2025-11-03T00:40:04.628056864Z [info] ðŸ—‘ï¸ Dropping old tables with incorrect schema...
2025-11-03T00:40:04.628089929Z [info] drwxr-xr-x    2 root     root          4096 Nov  3 00:30 shared
2025-11-03T00:40:04.705170419Z [info] [DROP-TABLES] Dropping old healing tables with incorrect schema...
2025-11-03T00:40:04.878552617Z [info] [DROP-TABLES] âœ… Dropped healing_messages
2025-11-03T00:40:04.881983497Z [info] [DROP-TABLES] âœ… Dropped healing_conversations
2025-11-03T00:40:04.884061784Z [info] [DROP-TABLES] âœ… Dropped healing_targets
2025-11-03T00:40:04.886601374Z [info] [DROP-TABLES] âœ… Dropped ai_knowledge_base
2025-11-03T00:40:04.892648373Z [info] [DROP-TABLES] âœ… Dropped platform_incident_playbooks
2025-11-03T00:40:04.894631964Z [info] [DROP-TABLES] âœ… Dropped ai_fix_attempts
2025-11-03T00:40:04.898422043Z [info] [DROP-TABLES] âœ… Dropped platform_heal_attempts
2025-11-03T00:40:04.902519013Z [info] [DROP-TABLES] âœ… Dropped platform_healing_sessions
2025-11-03T00:40:04.908069437Z [info] [DROP-TABLES] âœ… Dropped platform_incidents
2025-11-03T00:40:04.908080301Z [info] [DROP-TABLES] âœ… All old tables dropped successfully
2025-11-03T00:40:04.915028323Z [info] 
2025-11-03T00:40:04.915038397Z [info] ðŸ”§ Creating healing tables with correct schema...
2025-11-03T00:40:04.915046269Z [info] âš ï¸ psql not found, using node-postgres...
2025-11-03T00:40:05.145073581Z [info] âœ… Tables created
2025-11-03T00:40:05.151939758Z [info] 
2025-11-03T00:40:05.151948301Z [info] ðŸ”„ Running database migrations with drizzle-kit...
2025-11-03T00:40:05.155332958Z [info] âœ… Added sslmode=no-verify to DATABASE_URL for drizzle-kit
2025-11-03T00:40:05.155342874Z [info] âš ï¸ Skipping drizzle-kit push (Railway deployment - avoiding interactive prompts)
2025-11-03T00:40:05.155348870Z [info] âœ… Database schema ready!
2025-11-03T00:40:05.155355044Z [info] 
2025-11-03T00:40:05.155362612Z [info] ðŸ” Environment Check:
2025-11-03T00:40:05.155364313Z [info] ==========================================
2025-11-03T00:40:05.155368943Z [info] NODE_ENV: production
2025-11-03T00:40:05.155375071Z [info] PORT: 8080
2025-11-03T00:40:05.155380540Z [info] DATABASE_URL: âœ“ SET (hidden for security)
2025-11-03T00:40:05.155383164Z [info] 
2025-11-03T00:40:05.155386789Z [info] GITHUB_TOKEN: âœ“ SET
2025-11-03T00:40:05.155394840Z [info] ðŸ“‹ Step 1: Verify server directory exists...
2025-11-03T00:40:05.155394854Z [info] GITHUB_REPO: 6-7Development/archetype
2025-11-03T00:40:05.155401543Z [info] GITHUB_BRANCH: main
2025-11-03T00:40:05.155405540Z [info] âœ… server/ directory exists
2025-11-03T00:40:05.155407253Z [info] ANTHROPIC_API_KEY: âœ“ SET
2025-11-03T00:40:05.155415081Z [info] 
2025-11-03T00:40:05.155416529Z [info] 
2025-11-03T00:40:05.155421220Z [info] ðŸ“„ Ensuring replit.md is available...
2025-11-03T00:40:05.155427140Z [info] ðŸ“‹ Step 2: Verify server/index.ts exists...
2025-11-03T00:40:05.155428183Z [info] âœ… replit.md already present
2025-11-03T00:40:05.155436160Z [info] 
2025-11-03T00:40:05.155441086Z [info] ðŸš€ Starting Node.js application with debug wrapper...
2025-11-03T00:40:05.155442745Z [info] âœ… server/index.ts exists
2025-11-03T00:40:05.155448382Z [info] Command: sh debug-start.sh
2025-11-03T00:40:05.155452781Z [info] 
2025-11-03T00:40:05.155454444Z [info] 
2025-11-03T00:40:05.155459684Z [info] ==========================================
2025-11-03T00:40:05.155464884Z [info] ðŸ” DEBUG MODE - VERBOSE ERROR CAPTURE
2025-11-03T00:40:05.157381273Z [info] ðŸ“‹ Step 3: Check Node.js and tsx availability...
2025-11-03T00:40:05.162788606Z [info] Node version: v20.19.5
2025-11-03T00:40:05.342022492Z [info] NPM version: 10.8.2
2025-11-03T00:40:05.342037899Z [info] tsx location: /usr/local/bin/npx
2025-11-03T00:40:05.342047218Z [info] 
2025-11-03T00:40:05.342055783Z [info] ðŸ“‹ Step 4: Verify environment variables...
2025-11-03T00:40:05.342063655Z [info] NODE_ENV: production
2025-11-03T00:40:05.342072458Z [info] PORT: 8080
2025-11-03T00:40:05.342080871Z [info] DATABASE_URL: âœ“ SET
2025-11-03T00:40:05.342089368Z [info] 
2025-11-03T00:40:05.342098277Z [info] ðŸ“‹ Step 5: Test tsx can load...
2025-11-03T00:40:05.942978009Z [info] tsx v4.20.5
2025-11-03T00:40:05.958105238Z [info] node v20.19.5
2025-11-03T00:40:05.977907046Z [info] âœ… tsx is available
2025-11-03T00:40:05.977918337Z [info] 
2025-11-03T00:40:05.977924935Z [info] ðŸ“‹ Step 6: Starting server with tsx...
2025-11-03T00:40:05.977931582Z [info] Command: npx tsx server/index.ts
2025-11-03T00:40:05.977938816Z [info] ==========================================
2025-11-03T00:40:05.977945859Z [info] 
2025-11-03T00:40:09.911739860Z [info] [db] Environment: NODE_ENV=production, PORT=8080
2025-11-03T00:40:09.911750040Z [info] [db] Using DATABASE_URL: postgresql://***@postgres.railway.internal:5432/railway
2025-11-03T00:40:09.911758832Z [info] [db] Pool config: connectionTimeoutMillis=30000, max=20, ssl=enabled (rejectUnauthorized: false)
2025-11-03T00:40:09.911767345Z [info] [db] SSL Configuration: {rejectUnauthorized:false}
2025-11-03T00:40:09.911776548Z [info] [db] Connection string includes SSL params: true
2025-11-03T00:40:09.959989715Z [info] [PERFORMANCE] System prompt base cached (1544 chars) - saves ~4KB per request
2025-11-03T00:40:10.576742744Z [info] [PLATFORM-HEALING] PROJECT_ROOT: /app
2025-11-03T00:40:10.576748328Z [info] [RAILWAY-CONFIG] Production hardening active
2025-11-03T00:40:10.576753707Z [info] [RAILWAY-CONFIG] AI timeout: 480s
2025-11-03T00:40:10.576759809Z [info] [RAILWAY-CONFIG] Memory limit: 512MB
2025-11-03T00:40:10.576765053Z [info] [RAILWAY-CONFIG] Max concurrent AI: 3
2025-11-03T00:40:10.576770188Z [info] [PERFORMANCE] Compression middleware enabled - responses will be 70-80% smaller (SSE streams excluded)
2025-11-03T00:40:10.576775871Z [info] ðŸ“¡ WebSocket server initialized at /ws
2025-11-03T00:40:10.576781248Z [info] [PLATFORM-HEALING] Session manager connected to WebSocket
2025-11-03T00:40:10.576786477Z [info] [PLATFORM-HEALING] WebSocket server attached for preview broadcasts
2025-11-03T00:40:10.576791431Z [info] [PLATFORM-HEALING] Platform healing service connected to WebSocket
2025-11-03T00:40:10.576796440Z [info] [PLATFORM-METRICS] Starting WebSocket broadcaster (5s intervals)
2025-11-03T00:40:10.612709027Z [info] [HEAL-ORCHESTRATOR] Metrics broadcaster connected
2025-11-03T00:40:10.612717653Z [info] [WEBHOOKS] Webhooks router connected to metrics broadcaster
2025-11-03T00:40:10.638546224Z [info] [LOMU-AI-JOB-MANAGER] Initialized with WebSocket support
2025-11-03T00:40:10.638555086Z [info] [LOMU-AI-JOB-MANAGER] Job manager connected to WebSocket
2025-11-03T00:40:10.638565881Z [info] [LOMU-AI] WebSocket server initialized for live preview broadcasts
2025-11-03T00:40:10.638576808Z [info] [LOMU-AI-CHAT] Live preview WebSocket initialized
2025-11-03T00:40:10.638584917Z [info] [WEBHOOKS] Webhooks router mounted at /api/webhooks
2025-11-03T00:40:10.984184645Z [info] âœ… All routes registered successfully
2025-11-03T00:40:10.985868567Z [info] ðŸ” Testing database connection...
2025-11-03T00:40:11.035703354Z [info] 12:40:11 AM [express] serving on port 8080
2025-11-03T00:40:11.035714331Z [info] ðŸŒ Server accessible at http://0.0.0.0:8080
2025-11-03T00:40:11.158505053Z [info] âš ï¸ Retry attempt 1/5 failed: {
2025-11-03T00:40:11.158516101Z [info]   code: '42703',
2025-11-03T00:40:11.158524400Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:40:11.158531919Z [info]   nextRetryIn: '1000ms'
2025-11-03T00:40:11.158539314Z [info] }
2025-11-03T00:40:12.181675477Z [info] âš ï¸ Retry attempt 2/5 failed: {
2025-11-03T00:40:12.181684355Z [info]   code: '42703',
2025-11-03T00:40:12.181691378Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:40:12.181697814Z [info]   nextRetryIn: '2000ms'
2025-11-03T00:40:12.181705134Z [info] }
2025-11-03T00:40:14.266873358Z [info] âš ï¸ Retry attempt 3/5 failed: {
2025-11-03T00:40:14.266882266Z [info]   code: '42703',
2025-11-03T00:40:14.266888254Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:40:14.266894141Z [info]   nextRetryIn: '4000ms'
2025-11-03T00:40:14.266900281Z [info] }
2025-11-03T00:40:18.266210812Z [info] âš ï¸ Retry attempt 4/5 failed: {
2025-11-03T00:40:18.266222684Z [info]   code: '42703',
2025-11-03T00:40:18.266233545Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:40:18.266244179Z [info]   nextRetryIn: '8000ms'
2025-11-03T00:40:18.266257694Z [info] }
2025-11-03T00:40:26.274166884Z [info] âš ï¸ Retry attempt 5/5 failed: {
2025-11-03T00:40:26.274180467Z [info]   code: '42703',
2025-11-03T00:40:26.274189190Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:40:26.274197806Z [info]   nextRetryIn: '16000ms'
2025-11-03T00:40:26.274205668Z [info] }
2025-11-03T00:40:46.301853569Z [info] [HEAL-ORCHESTRATOR] Orchestrator started
2025-11-03T00:40:46.301855621Z [info] âŒ Database connection failed after retries: column "folder_id" does not exist
2025-11-03T00:40:46.301867040Z [info] 
2025-11-03T00:40:46.301869348Z [info] âš ï¸ Running in degraded mode (database unavailable)
2025-11-03T00:40:46.301876339Z [info] ðŸ” Checking GitHub integration configuration...
2025-11-03T00:40:46.301879191Z [info] ðŸ’¡ Auto-healing system DISABLED (users trigger manually via UI)
2025-11-03T00:40:46.301884329Z [info] âœ… GitHub integration configured successfully
2025-11-03T00:40:46.301890090Z [info]    ðŸ‘¥ Users pay for their own AI tokens when using Platform Healing
2025-11-03T00:40:46.301894475Z [info]    - Repository: 6-7Development/archetype
2025-11-03T00:40:46.301903429Z [info] [HEALTH-MONITOR] Starting platform health monitoring...
2025-11-03T00:40:46.301905512Z [info]    - Branch: main
2025-11-03T00:40:46.301913616Z [info]    - Token: âœ“ (configured)
2025-11-03T00:40:46.301913868Z [info] [HEALTH-MONITOR] Loaded 0 open incidents
2025-11-03T00:40:46.301921105Z [info]    - Owner User ID: Not set (owner must be manually marked in database)
2025-11-03T00:40:46.301924066Z [info] [HEALTH-MONITOR] Monitoring started
2025-11-03T00:40:46.301932080Z [info]    - Maintenance mode: Available for owner
2025-11-03T00:40:46.301934051Z [info] [HEAL-ORCHESTRATOR] Starting autonomous healing orchestrator...
2025-11-03T00:40:46.301940663Z [info] 