2025-11-03T00:53:20.000000000Z [info] Starting Container
2025-11-03T00:53:20.772069288Z [info] -rw-rw-r--    1 root     root           960 Nov  3 00:51 tsconfig.json
2025-11-03T00:53:20.772078121Z [info] ======================================
2025-11-03T00:53:20.772084925Z [info] ðŸš‚ RAILWAY STARTUP SCRIPT - DEBUG MODE
2025-11-03T00:53:20.772086822Z [info] ======================================
2025-11-03T00:53:20.772094477Z [info] Time: Mon Nov  3 00:53:20 UTC 2025
2025-11-03T00:53:20.772101433Z [info] Node version: v20.19.5
2025-11-03T00:53:20.772107800Z [info] NPM version: 10.8.2
2025-11-03T00:53:20.772114943Z [info] 
2025-11-03T00:53:20.772122498Z [info] ðŸ“ Current directory: /app
2025-11-03T00:53:20.772128624Z [info] ðŸ“‚ Listing root files:
2025-11-03T00:53:20.772134958Z [info] total 420
2025-11-03T00:53:20.772145816Z [info] drwxr-xr-x    1 root     root          4096 Nov  3 00:52 .
2025-11-03T00:53:20.772152942Z [info] dr-xr-xr-x    1 root     root          4096 Nov  3 00:53 ..
2025-11-03T00:53:20.772155466Z [info] -rw-rw-r--    1 root     root        361403 Nov  3 00:52 package-lock.json
2025-11-03T00:53:20.772160775Z [info] -rwxr-xr-x    1 root     root          1990 Nov  3 00:51 debug-start.sh
2025-11-03T00:53:20.772164007Z [info] -rw-rw-r--    1 root     root          4631 Nov  3 00:52 package.json
2025-11-03T00:53:20.772169230Z [info] -rw-rw-r--    1 root     root           325 Nov  3 00:51 drizzle.config.ts
2025-11-03T00:53:20.772171363Z [info] -rwxr-xr-x    1 root     root          3071 Nov  3 00:51 railway-start.sh
2025-11-03T00:53:20.772177255Z [info] drwxr-xr-x    3 root     root          4096 Nov  3 00:51 migrations
2025-11-03T00:53:20.772178560Z [info] -rw-rw-r--    1 root     root         12632 Nov  3 00:51 replit.md
2025-11-03T00:53:20.772185122Z [info] drwxr-xr-x    1 root     root          4096 Nov  3 00:52 node_modules
2025-11-03T00:53:20.772185174Z [info] drwxr-xr-x    1 root     root          4096 Nov  3 00:51 server
2025-11-03T00:53:20.772191376Z [info] drwxr-xr-x    2 root     root          4096 Nov  3 00:51 shared
2025-11-03T00:53:20.814118151Z [info] 
2025-11-03T00:53:20.814123414Z [info] ðŸ” Checking for server/public directory (frontend)...
2025-11-03T00:53:20.814128290Z [info] âœ… server/public directory exists (frontend build)
2025-11-03T00:53:20.814133715Z [info] 
2025-11-03T00:53:20.814139343Z [info] ðŸ”§ Running FULL database migration (all tables)...
2025-11-03T00:53:21.027450467Z [info] 
2025-11-03T00:53:21.027517852Z [info] PORT: 8080
2025-11-03T00:53:21.027524414Z [info] DATABASE_URL: âœ“ SET (hidden for security)
2025-11-03T00:53:21.027530488Z [info] GITHUB_TOKEN: âœ“ SET
2025-11-03T00:53:21.027536524Z [info] 
2025-11-03T00:53:21.027541720Z [info] ðŸ“‹ Step 1: Verify server directory exists...
2025-11-03T00:53:21.027546332Z [info] ðŸš€ Starting Node.js application with debug wrapper...
2025-11-03T00:53:21.027550579Z [info] âœ… server/ directory exists
2025-11-03T00:53:21.027554282Z [info] GITHUB_REPO: 6-7Development/archetype
2025-11-03T00:53:21.027556391Z [info] Command: sh debug-start.sh
2025-11-03T00:53:21.027561438Z [info] 
2025-11-03T00:53:21.027563394Z [info] GITHUB_BRANCH: main
2025-11-03T00:53:21.027566446Z [info] 
2025-11-03T00:53:21.027569682Z [info] ðŸ“‹ Step 2: Verify server/index.ts exists...
2025-11-03T00:53:21.027576576Z [info] âœ… server/index.ts exists
2025-11-03T00:53:21.027580718Z [info] ANTHROPIC_API_KEY: âœ“ SET
2025-11-03T00:53:21.027588842Z [info] 
2025-11-03T00:53:21.027590635Z [info] ==========================================
2025-11-03T00:53:21.027599405Z [info] ðŸ” DEBUG MODE - VERBOSE ERROR CAPTURE
2025-11-03T00:53:21.027601630Z [info] â„¹ï¸  Tables already exist - skipping migration
2025-11-03T00:53:21.027601710Z [info] ðŸ“„ Ensuring replit.md is available...
2025-11-03T00:53:21.027608426Z [info] ==========================================
2025-11-03T00:53:21.027614346Z [info] âœ… replit.md already present
2025-11-03T00:53:21.027615763Z [info] âœ… Added sslmode=no-verify to DATABASE_URL for drizzle-kit
2025-11-03T00:53:21.027616829Z [info] 
2025-11-03T00:53:21.027623545Z [info] 
2025-11-03T00:53:21.027624532Z [info] âš ï¸ Skipping drizzle-kit push (Railway deployment - avoiding interactive prompts)
2025-11-03T00:53:21.027632327Z [info] âœ… Database schema ready!
2025-11-03T00:53:21.027632990Z [info] ðŸ”„ Running database migrations with drizzle-kit...
2025-11-03T00:53:21.027640014Z [info] 
2025-11-03T00:53:21.027647681Z [info] ðŸ” Environment Check:
2025-11-03T00:53:21.027655556Z [info] NODE_ENV: production
2025-11-03T00:53:21.027672855Z [info] ðŸ“‹ Step 3: Check Node.js and tsx availability...
2025-11-03T00:53:21.027682446Z [info] Node version: v20.19.5
2025-11-03T00:53:21.103373738Z [info] NPM version: 10.8.2
2025-11-03T00:53:21.106124079Z [info] tsx location: /usr/local/bin/npx
2025-11-03T00:53:21.106131850Z [info] 
2025-11-03T00:53:21.106138385Z [info] ðŸ“‹ Step 4: Verify environment variables...
2025-11-03T00:53:21.106143025Z [info] NODE_ENV: production
2025-11-03T00:53:21.106147807Z [info] PORT: 8080
2025-11-03T00:53:21.106154241Z [info] DATABASE_URL: âœ“ SET
2025-11-03T00:53:21.106159915Z [info] 
2025-11-03T00:53:21.106166156Z [info] ðŸ“‹ Step 5: Test tsx can load...
2025-11-03T00:53:21.780820179Z [info] tsx v4.20.5
2025-11-03T00:53:21.800126991Z [info] node v20.19.5
2025-11-03T00:53:21.822053516Z [info] âœ… tsx is available
2025-11-03T00:53:21.822064301Z [info] 
2025-11-03T00:53:21.822073809Z [info] ðŸ“‹ Step 6: Starting server with tsx...
2025-11-03T00:53:21.822081803Z [info] Command: npx tsx server/index.ts
2025-11-03T00:53:21.822090036Z [info] ==========================================
2025-11-03T00:53:21.822097414Z [info] 
2025-11-03T00:53:24.985196852Z [info] [db] Environment: NODE_ENV=production, PORT=8080
2025-11-03T00:53:24.985208259Z [info] [db] Using DATABASE_URL: postgresql://***@postgres.railway.internal:5432/railway
2025-11-03T00:53:24.985216476Z [info] [db] Pool config: connectionTimeoutMillis=30000, max=20, ssl=enabled (rejectUnauthorized: false)
2025-11-03T00:53:24.985223595Z [info] [db] SSL Configuration: {rejectUnauthorized:false}
2025-11-03T00:53:24.985229508Z [info] [db] Connection string includes SSL params: true
2025-11-03T00:53:25.030106940Z [info] [PERFORMANCE] System prompt base cached (1544 chars) - saves ~4KB per request
2025-11-03T00:53:25.854084016Z [info] [WEBHOOKS] Webhooks router mounted at /api/webhooks
2025-11-03T00:53:25.854107894Z [info] [WEBHOOKS] Webhooks router connected to metrics broadcaster
2025-11-03T00:53:25.854117539Z [info] [LOMU-AI-JOB-MANAGER] Initialized with WebSocket support
2025-11-03T00:53:25.854119745Z [info] ðŸ“¡ WebSocket server initialized at /ws
2025-11-03T00:53:25.854127063Z [info] [LOMU-AI-JOB-MANAGER] Job manager connected to WebSocket
2025-11-03T00:53:25.854130550Z [info] [PLATFORM-HEALING] Session manager connected to WebSocket
2025-11-03T00:53:25.854134901Z [info] [LOMU-AI] WebSocket server initialized for live preview broadcasts
2025-11-03T00:53:25.854141055Z [info] [PLATFORM-HEALING] WebSocket server attached for preview broadcasts
2025-11-03T00:53:25.854144021Z [info] [LOMU-AI-CHAT] Live preview WebSocket initialized
2025-11-03T00:53:25.854151411Z [info] [PLATFORM-HEALING] Platform healing service connected to WebSocket
2025-11-03T00:53:25.854159936Z [info] [PLATFORM-HEALING] PROJECT_ROOT: /app
2025-11-03T00:53:25.854160990Z [info] [PLATFORM-METRICS] Starting WebSocket broadcaster (5s intervals)
2025-11-03T00:53:25.854178734Z [info] [RAILWAY-CONFIG] Production hardening active
2025-11-03T00:53:25.854180334Z [info] [HEAL-ORCHESTRATOR] Metrics broadcaster connected
2025-11-03T00:53:25.854189610Z [info] [RAILWAY-CONFIG] AI timeout: 480s
2025-11-03T00:53:25.854202973Z [info] [RAILWAY-CONFIG] Memory limit: 512MB
2025-11-03T00:53:25.854213985Z [info] [RAILWAY-CONFIG] Max concurrent AI: 3
2025-11-03T00:53:25.854222469Z [info] [PERFORMANCE] Compression middleware enabled - responses will be 70-80% smaller (SSE streams excluded)
2025-11-03T00:53:25.857857429Z [info] âœ… All routes registered successfully
2025-11-03T00:53:25.859438576Z [info] ðŸ” Testing database connection...
2025-11-03T00:53:25.896216429Z [info] 12:53:25 AM [express] serving on port 8080
2025-11-03T00:53:25.896221890Z [info] ðŸŒ Server accessible at http://0.0.0.0:8080
2025-11-03T00:53:26.004207064Z [info] âš ï¸ Retry attempt 1/5 failed: {
2025-11-03T00:53:26.004216831Z [info]   code: '42703',
2025-11-03T00:53:26.004222088Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:53:26.004226979Z [info]   nextRetryIn: '1000ms'
2025-11-03T00:53:26.004233449Z [info] }
2025-11-03T00:53:27.028588996Z [info] âš ï¸ Retry attempt 2/5 failed: {
2025-11-03T00:53:27.028594848Z [info]   code: '42703',
2025-11-03T00:53:27.028599719Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:53:27.028604908Z [info]   nextRetryIn: '2000ms'
2025-11-03T00:53:27.028609749Z [info] }
2025-11-03T00:53:29.109615826Z [info] âš ï¸ Retry attempt 3/5 failed: {
2025-11-03T00:53:29.109628256Z [info]   code: '42703',
2025-11-03T00:53:29.109637231Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:53:29.109645557Z [info]   nextRetryIn: '4000ms'
2025-11-03T00:53:29.109657230Z [info] }
2025-11-03T00:53:33.154979482Z [info] âš ï¸ Retry attempt 4/5 failed: {
2025-11-03T00:53:33.154985363Z [info]   code: '42703',
2025-11-03T00:53:33.154991302Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:53:33.154996929Z [info]   nextRetryIn: '8000ms'
2025-11-03T00:53:33.155002774Z [info] }
2025-11-03T00:53:41.136505408Z [info] âš ï¸ Retry attempt 5/5 failed: {
2025-11-03T00:53:41.136516828Z [info]   code: '42703',
2025-11-03T00:53:41.136523646Z [info]   message: 'column "folder_id" does not exist',
2025-11-03T00:53:41.136528362Z [info]   nextRetryIn: '16000ms'
2025-11-03T00:53:41.136533438Z [info] }
2025-11-03T00:54:01.102032691Z [info]     at async PlatformHealthMonitor.start (/app/server/services/healthMonitor.ts:34:5)
2025-11-03T00:54:01.102046213Z [info]     at async <anonymous> (/app/server/index.ts:183:3) {
2025-11-03T00:54:01.102056267Z [info] âŒ Database connection failed after retries: column "folder_id" does not exist
2025-11-03T00:54:01.102064842Z [info] âš ï¸ Running in degraded mode (database unavailable)
2025-11-03T00:54:01.102075930Z [info] ðŸ’¡ Auto-healing system DISABLED (users trigger manually via UI)
2025-11-03T00:54:01.102076658Z [info]   length: 118,
2025-11-03T00:54:01.102086671Z [info]   severity: 'ERROR',
2025-11-03T00:54:01.102091656Z [info]    ðŸ‘¥ Users pay for their own AI tokens when using Platform Healing
2025-11-03T00:54:01.102102184Z [info]   code: '42P01',
2025-11-03T00:54:01.102104137Z [info] [HEALTH-MONITOR] Starting platform health monitoring...
2025-11-03T00:54:01.102111646Z [info] [HEALTH-MONITOR] Failed to load open incidents: error: relation "platform_incidents" does not exist
2025-11-03T00:54:01.102117285Z [info]   detail: undefined,
2025-11-03T00:54:01.102124447Z [info]     at /app/node_modules/pg-pool/index.js:45:11
2025-11-03T00:54:01.102129323Z [info]   hint: undefined,
2025-11-03T00:54:01.102139588Z [info]     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-11-03T00:54:01.102141213Z [info]   position: '298',
2025-11-03T00:54:01.102152372Z [info]   internalPosition: undefined,
2025-11-03T00:54:01.102155844Z [info]     at async <anonymous> (/app/node_modules/src/node-postgres/session.ts:104:19)
2025-11-03T00:54:01.102165178Z [info]   internalQuery: undefined,
2025-11-03T00:54:01.102168634Z [info]     at async PlatformHealthMonitor.loadOpenIncidents (/app/server/services/healthMonitor.ts:60:25)
2025-11-03T00:54:01.102174029Z [info]   where: undefined,
2025-11-03T00:54:01.102179551Z [info]   schema: undefined,
2025-11-03T00:54:01.103587633Z [info]   table: undefined,
2025-11-03T00:54:01.103589769Z [info] [HEALTH-MONITOR] Monitoring started
2025-11-03T00:54:01.103603223Z [info] [HEAL-ORCHESTRATOR] Starting autonomous healing orchestrator...
2025-11-03T00:54:01.103605434Z [info]   column: undefined,
2025-11-03T00:54:01.103611034Z [info]   dataType: undefined,
2025-11-03T00:54:01.103615669Z [info]   constraint: undefined,
2025-11-03T00:54:01.103619670Z [info]   file: 'parse_relation.c',
2025-11-03T00:54:01.103623899Z [info]   line: '1449',
2025-11-03T00:54:01.103627960Z [info]   routine: 'parserOpenTable'
2025-11-03T00:54:01.103632157Z [info] }
2025-11-03T00:54:01.103668934Z [info] [HEAL-ORCHESTRATOR] Orchestrator started
2025-11-03T00:54:01.103680343Z [info] 
2025-11-03T00:54:01.103690637Z [info] ðŸ” Checking GitHub integration configuration...
2025-11-03T00:54:01.103698658Z [info] âœ… GitHub integration configured successfully
2025-11-03T00:54:01.103707758Z [info]    - Repository: 6-7Development/archetype
2025-11-03T00:54:01.103715075Z [info]    - Branch: main
2025-11-03T00:54:01.103720037Z [info]    - Token: âœ“ (configured)
2025-11-03T00:54:01.103725593Z [info]    - Owner User ID: Not set (owner must be manually marked in database)
2025-11-03T00:54:01.103730719Z [info]    - Maintenance mode: Available for owner
2025-11-03T00:54:01.103736753Z [info] 